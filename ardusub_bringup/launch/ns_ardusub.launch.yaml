launch:

  # Arguments
  - arg:
      name: mavros_file

  - arg:
      name: prefix
      default: ""

  - arg:
      name: use_sim
      default: "false"

  - arg:
      name: use_manager
      default: "false"

  - arg:
      name: use_joy
      default: "false"

  - arg:
      name: model_name
      default: ""

  - arg:
      name: ardusub_params_file
      default: ""

  - arg:
      name: manager_file
      default: ""

  - arg:
      name: joy_file
      default: $(find-pkg-share ardusub_teleop)/config/joy_teleop.yaml

  - arg:
      name: sitl_file
      default: $(find-pkg-share ardusub_bringup)/launch/sitl_multi_robot.launch.yaml

  # Arguments for ardusub instance
  - arg:
      name: ardusub_instance
      default: "0"

  - arg:
      name: sysid_thismav
      default: "1"

  # ros_gz_sim robot pose
  - arg:
      name: rob_x
      default: "0.0"

  - arg:
      name: rob_y
      default: "0.0"

  - arg:
      name: rob_z
      default: "0.0"

  # Nodes
  - node:
      pkg: mavros
      exec: mavros_node
      param:
        - from: $(var mavros_file)
        - name: use_sim_time
          value: $(var use_sim)

  # Includes
  - include:
      file: $(var sitl_file)
      if: $(var use_sim)
      arg:
        - name: model_name
          value: $(var model_name)
        - name: ardusub_params_file
          value: $(var ardusub_params_file)
        - name: prefix
          value: $(var prefix)
        - name: ardusub_instance
          value: $(var ardusub_instance)
        - name: sysid_thismav
          value: $(var sysid_thismav)
        - name: rob_x
          value: $(var rob_x)
        - name: rob_y
          value: $(var rob_y)
        - name: rob_z
          value: $(var rob_z)

  - include:
      file: $(find-pkg-share ardusub_manager)/launch/ardusub_manager.launch.py
      if: $(var use_manager)
      arg:
        - name: ardusub_manager_file
          value: $(var manager_file)

  - include:
      file: $(find-pkg-share ardusub_teleop)/launch/teleop.launch.yaml
      if: $(var use_joy)
      arg:
        - name: joy_file
          value: $(var joy_file)
